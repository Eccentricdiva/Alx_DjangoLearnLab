{% extends "base.html" %}

{% block title %}All Posts{% endblock %}

{% block content %}
  <h2>All Blog Posts</h2>

  {% if posts %}
    <ul>
      {% for post in posts %}
        <li>
          <h3>
            <a href="{% url 'blog:post_detail' slug=post.slug %}">
              {{ post.title }}
            </a>
          </h3>
          <p>{{ post.content|truncatewords:30 }}</p>
          <p><em>Published: {{ post.created_at }}</em></p>

          <!-- Show tags -->
          <p>
            <strong>Tags:</strong>
            {% for tag in post.tags.all %}
              <a href="{% url 'blog:posts_by_tag' tag.name %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
            {% empty %}
              No tags
            {% endfor %}
          </p>
        </li>
        <hr>
      {% endfor %}
    </ul>
  {% else %}
    <p>No posts available.</p>
  {% endif %}
{% endblock %}
